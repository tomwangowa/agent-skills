<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{TITLE}}</title>

    <!-- reveal.js CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/dist/reset.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/dist/reveal.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/dist/theme/simple.css">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/plugin/highlight/monokai.css">

    <!-- Google Fonts (if using custom fonts from YAML) -->
    {{GOOGLE_FONTS_IMPORT}}

    <style>
        /* CSS Variables from Style YAML */
        :root {
            --color-base: {{COLOR_BASE}};
            --color-primary: {{COLOR_PRIMARY}};
            --color-text: {{COLOR_TEXT}};
            --color-background: {{COLOR_BACKGROUND}};
            --color-accent-1: {{COLOR_ACCENT_1}};
            --color-accent-2: {{COLOR_ACCENT_2}};
            --color-highlight: {{COLOR_HIGHLIGHT}};

            --font-heading: {{FONT_HEADING}};
            --font-body: {{FONT_BODY}};
            --font-heading-size: {{FONT_HEADING_SIZE}};
            --font-body-size: {{FONT_BODY_SIZE}};
            --font-heading-weight: {{FONT_HEADING_WEIGHT}};
            --font-body-weight: {{FONT_BODY_WEIGHT}};
            --line-height-heading: {{LINE_HEIGHT_HEADING}};
            --line-height-body: {{LINE_HEIGHT_BODY}};
        }

        /* Apply style to reveal.js */
        .reveal {
            font-family: var(--font-body);
            font-size: var(--font-body-size);
            font-weight: var(--font-body-weight);
            color: var(--color-text);
            background: var(--color-background);
        }

        .reveal h1, .reveal h2, .reveal h3, .reveal h4, .reveal h5, .reveal h6 {
            font-family: var(--font-heading);
            font-weight: var(--font-heading-weight);
            color: var(--color-primary);
            line-height: var(--line-height-heading);
            {{TEXT_TRANSFORM}}
            {{LETTER_SPACING}}
        }

        .reveal h1 { font-size: calc(var(--font-heading-size) * 1.2); }
        .reveal h2 { font-size: var(--font-heading-size); }
        .reveal h3 { font-size: calc(var(--font-heading-size) * 0.8); }

        .reveal p, .reveal li {
            line-height: var(--line-height-body);
        }

        .reveal a {
            color: var(--color-accent-1);
        }

        .reveal a:hover {
            color: var(--color-accent-2);
        }

        .reveal code {
            background: var(--color-highlight);
            padding: 0.2em 0.4em;
            border-radius: 3px;
        }

        .reveal pre code {
            max-height: 500px;
        }

        .reveal strong, .reveal b {
            color: var(--color-primary);
        }

        /* Visual Motifs from YAML */
        {{VISUAL_MOTIFS_CSS}}

        /* Footer Styling */
        .footer {
            position: fixed;
            bottom: 20px;
            width: 100%;
            font-size: 12pt;
            color: var(--color-text);
            opacity: 0.6;
            display: flex;
            justify-content: space-between;
            padding: 0 40px;
            z-index: 1000;
            font-family: var(--font-body);
        }

        .footer-left {
            text-align: left;
            flex: 1;
        }

        .footer-center {
            text-align: center;
            flex: 1;
        }

        .footer-right {
            text-align: right;
            flex: 1;
        }

        /* Hide footer on specific slides */
        .no-footer .footer {
            display: none !important;
        }

        /* Layout adjustments */
        .reveal .slides section {
            text-align: left;
        }

        .reveal .slides section.center {
            text-align: center;
        }

        /* Safe areas from YAML */
        .reveal .slides section {
            padding: {{SAFE_AREA_TOP}} {{SAFE_AREA_RIGHT}} {{SAFE_AREA_BOTTOM}} {{SAFE_AREA_LEFT}};
        }

        /* Background overlay for images */
        .reveal section[data-background-image]::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
            z-index: -1;
        }

        .reveal section[data-background-image] h1,
        .reveal section[data-background-image] h2,
        .reveal section[data-background-image] p {
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        /* Logo positioning */
        .logo {
            position: fixed;
            {{LOGO_POSITION}}: 30px;
            max-height: 60px;
            z-index: 999;
        }

        .no-footer .logo {
            display: none;
        }
    </style>
</head>
<body>
    <div class="reveal">
        <!-- Global Footer -->
        <div class="footer">
            <span class="footer-left">{{COMPANY_NAME}}</span>
            <span class="footer-center">{{AUTHOR}}</span>
            <span class="footer-right">{{DATE}} | <span class="page-number"></span></span>
        </div>

        <!-- Optional Logo -->
        {{LOGO_HTML}}

        <div class="slides">
            <!-- Title Slide -->
            <section class="no-footer center"
                     data-background-image="{{COVER_IMAGE}}"
                     data-background-size="cover"
                     data-background-position="center">
                <h1>{{TITLE}}</h1>
                <p style="font-size: 1.2em;">{{SUBTITLE}}</p>
                <p><small>{{AUTHOR}} | {{DATE}}</small></p>
            </section>

            <!-- Content Slides - Replace with actual content -->
            {{SLIDES_CONTENT}}

            <!-- Q&A/Ending Slide -->
            <section class="no-footer center"
                     data-background-image="{{ENDING_IMAGE}}"
                     data-background-size="cover"
                     data-background-position="center">
                <h1>Thank You!</h1>
                <p style="font-size: 1.2em;">{{CONTACT_INFO}}</p>
            </section>
        </div>
    </div>

    <!-- reveal.js JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/dist/reveal.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/plugin/notes/notes.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/plugin/markdown/markdown.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/plugin/highlight/highlight.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/plugin/zoom/zoom.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/plugin/search/search.js"></script>

    <script>
        Reveal.initialize({
            hash: true,
            controls: true,
            progress: true,
            center: false,
            slideNumber: false, // Using custom footer instead
            transition: 'slide', // none/fade/slide/convex/concave/zoom

            plugins: [
                RevealMarkdown,
                RevealHighlight,
                RevealNotes,
                RevealZoom,
                RevealSearch
            ]
        });

        // Update page numbers in footer
        function updatePageNumber() {
            const currentSlide = Reveal.getIndices().h + 1;
            const totalSlides = Reveal.getTotalSlides();
            const pageNumberEl = document.querySelector('.page-number');
            if (pageNumberEl) {
                pageNumberEl.textContent = currentSlide + ' / ' + totalSlides;
            }
        }

        // Update on slide change
        Reveal.on('slidechanged', updatePageNumber);
        Reveal.on('ready', updatePageNumber);
    </script>
</body>
</html>
